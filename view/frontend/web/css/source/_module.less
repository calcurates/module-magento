/**
 * @author Calcurates Team
 * @copyright Copyright Â© 2021 Calcurates (https://www.calcurates.com)
 * @license https://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 * @package Calcurates_ModuleMagento
 */

@calcurates-chose-shipping-or-pickup-button-chosen__background: @color-white;

//
//  Common
//  -------------------------------------------

& when (@media-common = true) {
  .calcurates-rate-img {
    width: 50px;
    min-width: 50px;
    display: block;
    margin: 0 10px;
  }

  .table-checkout-shipping-method {
    .field-tooltip-action {
      &.action-calendar {
        &:before {
          content: '\e612';
        }
      }
    }
  }

  .calcurates-rates-container {
    & {
      margin-top: 20px;
      padding: 20px;
      background: #f6f6f6;
    }

    .calcurates-rates-title {
      margin: 0 0 15px 15px;
      font-weight: 600;
      font-size: 16px;
    }

    .calcurates-address-autocomplete,
    .calcurates-rates-list {
      margin: 0 15px 15px 15px;
    }

    .calcurates-rate-item {
      margin: 0 0 15px 0;
    }
  }

  .calcurates-estimate-block {
    & {
      position: relative;
      margin-bottom: 20px;
      min-height: 70px;
    }

    &.-hidden {
      display: none;
    }

    > .loading-mask {
      position: absolute;
    }

    > .loading-mask > .loader > img {
      position: absolute;
    }
  }
  .calcurates-in-store-pickup {
    & {
      margin-top: 2rem;
      margin-bottom: 2rem;
    }
    .action {
      .lib-button-l();

      &.chosen {
        .lib-css(
                background,
                @calcurates-chose-shipping-or-pickup-button-chosen__background
        );
      }
    }

    .calcurates-store {
      margin-top: 2rem;
    }
  }

  .calcurates-delivery-dates-sidebar-container {
    .calcurates-label {
      color: #666;
    }
  }

  // Amasty OneStepCheckout compatibility - start
  #checkout:not(.am-checkout) #opc-shipping_method #checkout-shipping-method-load {
    .table-checkout-shipping-method:not(.amcheckout-shipping-methods) {
      max-width: unset;
    }
  }
  #checkout.am-checkout {
    &.-modern {
      .table-checkout-shipping-method tbody {
        tr.shipment-title:first-child td {
          width: auto;
        }
        .shipment-products-row,
        .shipment-title {
          width: 100%;
        }
        .row-error {
          width: 100%;
          .lib-vendor-prefix-display(flex);

          .col-error {
            width: 100%;
          }
        }
      }
    }
  }

  // Amasty OneStepCheckout compatibility - end

  .table-checkout-shipping-method {
    > tbody > tr > th,
    > tfoot > tr > th,
    > tbody > tr > td,
    > tfoot > tr > td {
      vertical-align: middle;
    }
    .col-logo {
      text-align: left;
    }
    tr.shipment-title {
      td {
        padding-bottom: 0;
      }
    }
    .field-tooltip {
      display: inline-block;
    }
    tr.shipment-products-row {
      td {
        border-top-width: 0;

        &.col:not(:first-child):not(.col-logo):not(.col-carrier) {
          padding-right: 0.5rem;
          padding-left: 0.5rem;
        }
        &.col-carrier {
          width: 23%;
        }
      }

      td.shipment-products {
        vertical-align: top;
        width: 30%;

        .product {
          .lib-vendor-prefix-display(flex);
          .lib-vendor-prefix-flex-direction(row);
          gap: 1.5rem;
          margin-bottom: 1.5rem;

          .product-image-container {
            flex-shrink: 0;
          }
          .product-image-wrapper {
            overflow: visible;
          }
          .product-item-details {
            flex-basis: fit-content;
          }
          .details-qty {
            .label:after {
              content: ':';
            }
          }
        }
      }
      >td[colspan="5"] {
        padding-right: 0;
      }
    }
  }
}

//
//  Mobile
//  _____________________________________________________
.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__m) {
  .table-checkout-shipping-method {
    tr.shipment-products-row {
      .lib-vendor-prefix-display(flex);
      .lib-vendor-prefix-flex-direction(column);

      td.shipment-products {
        width: 100%;
      }

      ~.row {
        .lib-vendor-prefix-display(flex);
        .lib-vendor-prefix-flex-wrap(nowrap);

        td {
          flex-grow: 1;
        }
      }
    }
  }
}

//
//  Desktop
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__m) {

}
